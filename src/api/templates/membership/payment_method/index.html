{% match has_payment_method %}
  {% when true %}
    <h2>Change payment method</h2>
  {% when false %}
    <h2>Add payment method</h2>
{% endmatch %}

<form hx-post="/membership/payment-method" class="validated" novalidate>
  <input type="hidden" name="back_to" value="{{ back_to }}">

  <div class="mb-3">
    <label for="card_number" class="form-label">Card number</label>
    <input type="text" 
           class="form-control" 
           id="card_number" 
           name="card_number"
           pattern="\d{16}"
           maxlength="16"
           required>
    <label for="card_number" class="invalid-feedback">
      Enter a valid 16-digit card number
    </label>
  </div>

  <div class="row">
    <div class="col-md-6 mb-3">
      <label for="card_expiration_date" class="form-label">Expiration date</label>
      <input type="text" 
             class="form-control" 
             id="card_expiration_date" 
             name="card_expiration_date" 
             placeholder="MM/YY"
             pattern="(0[1-9]|1[0-2])\/([0-9]{2})"
             maxlength="5"
             required>
      <label for="card_expiration_date" class="invalid-feedback">
        Enter a valid expiration date (MM/YY)
      </label>
    </div>
    <div class="col-md-6 mb-3">
      <label for="card_cvc" class="form-label">CVV/CVC</label>
      <input type="text" 
             class="form-control" 
             id="card_cvc" 
             name="card_cvc"
             pattern="\d{3,4}"
             maxlength="4"
             required>
      <label for="card_cvc" class="invalid-feedback">
        Enter a valid CVV/CVC (3-4 digits)
      </label>
    </div>
  </div>

  <div class="text-end">
    <button type="submit" class="btn btn-primary">Save</button>
  </div>
</form>
